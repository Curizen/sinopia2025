<div class="task-card p-6 bg-white rounded-2xl shadow hover:shadow-lg transition border border-gray-100">
  <div class="flex justify-between items-center mb-3">
    <h2 class="text-lg font-semibold text-gray-800 flex items-center">
      <i class="fas fa-clipboard-list mr-2 text-orange-500"></i> <%= task.title %>
    </h2>
    <span class="px-3 py-1 rounded-full text-xs font-medium tracking-wide 
      <%= task.status === 'Completed' ? 'bg-green-100 text-green-700' : 'bg-blue-100 text-blue-700' %>">
      <%= task.status %>
    </span>
  </div>

  <p class="text-gray-600 text-sm mb-4 leading-relaxed"><%= task.description %></p>

  <!-- المهام الفرعية مع checkboxes -->
  <ul class="subtasks space-y-2 mb-4">
    <% task.subtasks.forEach((st, idx) => { %>
      <li class="flex items-center space-x-2">
        <input type="checkbox" 
               class="subtask-checkbox w-4 h-4 text-orange-600 border-gray-300 rounded" 
               data-task="<%= task.title %>" 
               <%= st.done ? 'checked' : '' %>>
        <span class="<%= st.done ? 'line-through text-gray-400' : '' %>"><%= st.text %></span>
      </li>
    <% }) %>
  </ul>

  <div class="w-full bg-gray-200 rounded-full h-2.5 mb-3">
    <div class="progress-bar h-2.5 rounded-full transition-all duration-500
      <%= task.progress === 100 ? 'bg-green-500' : 'bg-orange-500' %>"
      style="width:<%= task.progress %>%">
    </div>
  </div>
  <p class="progress-text text-xs text-gray-500 mb-4">
    <i class="fas fa-chart-line mr-1 text-orange-400"></i> Progress: <span class="font-medium"><%= task.progress %>%</span>
  </p>

  <div class="flex justify-between items-center text-xs text-gray-500 mt-2 mb-4">
    <p><i class="far fa-calendar-alt mr-1 text-gray-400"></i> Deadline: <%= task.deadline %></p>
    <p>
      <i class="fas fa-check-circle mr-1 <%= task.approved ? 'text-green-500' : 'text-red-400' %>"></i>
      <%= task.approved ? 'Approved' : 'Not Approved' %>
    </p>
  </div>
</div>
